# ÂâçÁ´Ø Memos ÂÖºÂÆπÊÄßÊîπÈÄ†ÊåáÂçó

## üéØ ÁõÆÊ†á

Â∞ÜÁé∞ÊúâÁöÑ React/TypeScript ÂâçÁ´ØÊîπÈÄ†‰∏∫‰∏é memos È°πÁõÆÈ£éÊ†ºÂÆåÂÖ®‰∏ÄËá¥ÁöÑÁïåÈù¢ÔºåÂåÖÊã¨Ôºö
- ÈááÁî® memos ÁöÑ UI/UX ËÆæËÆ°ËØ≠Ë®Ä
- ÂÖºÂÆπÊñ∞ÁöÑ API Á´ØÁÇπÁªìÊûÑ
- ÊîØÊåÅ memos ÁöÑÂäüËÉΩÁâπÊÄß
- ‰øùÊåÅÂìçÂ∫îÂºèËÆæËÆ°

## üîÑ API Ë∞ÉÁî®Êõ¥Êñ∞

### 1. Êõ¥Êñ∞ API Âü∫Á°ÄÈÖçÁΩÆ

```typescript
// src/config/api.ts
const API_BASE_URL = '/api/v1';  // Êõ¥Êñ∞‰∏∫ v1 API

export const API_ENDPOINTS = {
  // ËÆ§ËØÅÁõ∏ÂÖ≥
  AUTH_SIGNUP: `${API_BASE_URL}/auth/signup`,     // Âéü register
  AUTH_LOGIN: `${API_BASE_URL}/auth/login`,
  USER_ME: `${API_BASE_URL}/user/me`,             // Âéü /api/auth/me
  
  // Memo Áõ∏ÂÖ≥ (Âéü notes)
  MEMOS: `${API_BASE_URL}/memos`,
  MEMO_BY_ID: (id: number) => `${API_BASE_URL}/memos/${id}`,
};
```

### 2. Êõ¥Êñ∞Êï∞ÊçÆÁ±ªÂûãÂÆö‰πâ

```typescript
// src/types/memos.ts
export interface Memo {
  id?: number;
  name: string;           // "memos/123" Ê†ºÂºè
  uid: string;            // "user_id-memo_id" Ê†ºÂºè
  content: string;
  visibility: 'PRIVATE' | 'WORKSPACE' | 'PUBLIC';
  tags: string[];
  createTime: string;     // ISO 8601 Ê†ºÂºè
  updateTime: string;
  displayTime?: string;
  pinned: boolean;
  parent?: number;
  resources?: Resource[];
  relations?: Relation[];
}

export interface User {
  id: number;
  name: string;           // "users/123" Ê†ºÂºè
  nickname?: string;
  email?: string;
  avatarUrl?: string;
  role: 'HOST' | 'ADMIN' | 'USER';
  rowStatus: 'NORMAL' | 'ARCHIVED';
  createTime: string;
  updateTime: string;
}

export interface Resource {
  id?: number;
  name: string;
  filename: string;
  type: string;
  size: string;
  memo?: number;
}

export interface AuthResponse {
  user: User;
  accessToken: string;
}
```

### 3. Êõ¥Êñ∞ API ÊúçÂä°ÂáΩÊï∞

```typescript
// src/services/memoService.ts
import { Memo, AuthResponse } from '../types/memos';

class MemoService {
  private baseURL = '/api/v1';

  // ËÆ§ËØÅÁõ∏ÂÖ≥
  async signup(username: string, password: string): Promise<AuthResponse> {
    const response = await fetch(`${this.baseURL}/auth/signup`, {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({ username, password }),
    });
    return response.json();
  }

  async login(username: string, password: string): Promise<AuthResponse> {
    const response = await fetch(`${this.baseURL}/auth/login`, {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({ username, password }),
    });
    return response.json();
  }

  // Memo Áõ∏ÂÖ≥
  async createMemo(data: {
    content: string;
    visibility?: 'PRIVATE' | 'WORKSPACE' | 'PUBLIC';
    pinned?: boolean;
  }): Promise<Memo> {
    const token = localStorage.getItem('accessToken');
    const response = await fetch(`${this.baseURL}/memos`, {
      method: 'POST',
      headers: {
        'Content-Type': 'application/json',
        'Authorization': `Bearer ${token}`,
      },
      body: JSON.stringify(data),
    });
    return response.json();
  }

  async getMemos(params?: {
    pageSize?: number;
    pageToken?: string;
    filter?: string;
  }): Promise<{ memos: Memo[]; nextPageToken?: string }> {
    const token = localStorage.getItem('accessToken');
    const queryParams = new URLSearchParams();
    
    if (params?.pageSize) queryParams.set('pageSize', params.pageSize.toString());
    if (params?.pageToken) queryParams.set('pageToken', params.pageToken);
    if (params?.filter) queryParams.set('filter', params.filter);

    const response = await fetch(`${this.baseURL}/memos?${queryParams}`, {
      headers: { 'Authorization': `Bearer ${token}` },
    });
    return response.json();
  }

  async updateMemo(id: number, data: Partial<Memo>): Promise<Memo> {
    const token = localStorage.getItem('accessToken');
    const response = await fetch(`${this.baseURL}/memos/${id}`, {
      method: 'PATCH',
      headers: {
        'Content-Type': 'application/json',
        'Authorization': `Bearer ${token}`,
      },
      body: JSON.stringify(data),
    });
    return response.json();
  }

  async deleteMemo(id: number): Promise<void> {
    const token = localStorage.getItem('accessToken');
    await fetch(`${this.baseURL}/memos/${id}`, {
      method: 'DELETE',
      headers: { 'Authorization': `Bearer ${token}` },
    });
  }
}

export const memoService = new MemoService();
```

## üé® UI/UX ÊîπÈÄ† - memos È£éÊ†º

### 1. ‰∏ªËâ≤Ë∞ÉÂíåËÆæËÆ°ËØ≠Ë®Ä

```css
/* src/styles/memos-theme.css */
:root {
  /* memos ‰∏ªËâ≤Ë∞É */
  --color-primary: #6366f1;        /* ÈùõËìùËâ≤ */
  --color-primary-hover: #4f46e5;
  --color-secondary: #64748b;      /* Áü≥ÊùøÁÅ∞ */
  --color-accent: #f59e0b;         /* Áê•ÁèÄËâ≤ */
  
  /* ËÉåÊôØËâ≤ */
  --color-bg-primary: #ffffff;
  --color-bg-secondary: #f8fafc;
  --color-bg-tertiary: #f1f5f9;
  
  /* ÊñáÂ≠óËâ≤ */
  --color-text-primary: #1e293b;
  --color-text-secondary: #64748b;
  --color-text-muted: #94a3b8;
  
  /* ËæπÊ°Ü */
  --color-border: #e2e8f0;
  --color-border-hover: #cbd5e1;
  
  /* Áä∂ÊÄÅËâ≤ */
  --color-success: #10b981;
  --color-warning: #f59e0b;
  --color-error: #ef4444;
}

/* memos Âç°ÁâáÊ†∑Âºè */
.memo-card {
  @apply bg-white rounded-lg border border-gray-200 p-4 mb-3 shadow-sm hover:shadow-md transition-shadow;
}

.memo-content {
  @apply text-gray-900 leading-relaxed;
}

.memo-meta {
  @apply text-sm text-gray-500 mt-2 flex items-center gap-2;
}

.memo-tag {
  @apply inline-block bg-blue-100 text-blue-800 text-xs px-2 py-1 rounded-full;
}
```

### 2. ‰∏ªË¶ÅÁªÑ‰ª∂ÊîπÈÄ†

#### Memo ÂàóË°®ÁªÑ‰ª∂
```typescript
// src/components/MemoList.tsx
import React, { useState, useEffect } from 'react';
import { Memo } from '../types/memos';
import { memoService } from '../services/memoService';

export const MemoList: React.FC = () => {
  const [memos, setMemos] = useState<Memo[]>([]);
  const [loading, setLoading] = useState(true);
  const [nextPageToken, setNextPageToken] = useState<string>();

  useEffect(() => {
    loadMemos();
  }, []);

  const loadMemos = async () => {
    try {
      const result = await memoService.getMemos({ pageSize: 20 });
      setMemos(result.memos);
      setNextPageToken(result.nextPageToken);
    } catch (error) {
      console.error('Failed to load memos:', error);
    } finally {
      setLoading(false);
    }
  };

  const formatTime = (isoString: string) => {
    return new Date(isoString).toLocaleString('zh-CN');
  };

  const extractTags = (content: string) => {
    const tagRegex = /#([^\s#]+)/g;
    const tags: string[] = [];
    let match;
    while ((match = tagRegex.exec(content)) !== null) {
      tags.push(match[1]);
    }
    return tags;
  };

  if (loading) {
    return (
      <div className="flex justify-center py-8">
        <div className="animate-spin rounded-full h-8 w-8 border-b-2 border-primary"></div>
      </div>
    );
  }

  return (
    <div className="space-y-4">
      {memos.map((memo) => (
        <div key={memo.id} className="memo-card">
          {/* ÁΩÆÈ°∂Ê†áËØÜ */}
          {memo.pinned && (
            <div className="flex items-center mb-2">
              <span className="inline-flex items-center px-2 py-1 rounded-full text-xs bg-yellow-100 text-yellow-800">
                üìå ÁΩÆÈ°∂
              </span>
            </div>
          )}
          
          {/* ÂÜÖÂÆπ */}
          <div className="memo-content">
            {memo.content}
          </div>
          
          {/* Ê†áÁ≠æ */}
          {memo.tags.length > 0 && (
            <div className="flex flex-wrap gap-1 mt-2">
              {memo.tags.map((tag, index) => (
                <span key={index} className="memo-tag">
                  #{tag}
                </span>
              ))}
            </div>
          )}
          
          {/* ÂÖÉ‰ø°ÊÅØ */}
          <div className="memo-meta">
            <span>{formatTime(memo.createTime)}</span>
            <span>‚Ä¢</span>
            <span className="capitalize">{memo.visibility.toLowerCase()}</span>
            {memo.updateTime !== memo.createTime && (
              <>
                <span>‚Ä¢</span>
                <span>Â∑≤ÁºñËæë</span>
              </>
            )}
          </div>
        </div>
      ))}
      
      {/* Âä†ËΩΩÊõ¥Â§ö */}
      {nextPageToken && (
        <div className="text-center py-4">
          <button 
            className="px-4 py-2 bg-primary text-white rounded-lg hover:bg-primary-hover"
            onClick={loadMemos}
          >
            Âä†ËΩΩÊõ¥Â§ö
          </button>
        </div>
      )}
    </div>
  );
};
```

#### Memo ÁºñËæëÂô®ÁªÑ‰ª∂
```typescript
// src/components/MemoEditor.tsx
import React, { useState } from 'react';
import { memoService } from '../services/memoService';

interface MemoEditorProps {
  onMemoCreated?: () => void;
}

export const MemoEditor: React.FC<MemoEditorProps> = ({ onMemoCreated }) => {
  const [content, setContent] = useState('');
  const [visibility, setVisibility] = useState<'PRIVATE' | 'WORKSPACE' | 'PUBLIC'>('PRIVATE');
  const [pinned, setPinned] = useState(false);
  const [loading, setLoading] = useState(false);

  const handleSubmit = async (e: React.FormEvent) => {
    e.preventDefault();
    if (!content.trim()) return;

    setLoading(true);
    try {
      await memoService.createMemo({
        content: content.trim(),
        visibility,
        pinned,
      });
      setContent('');
      setPinned(false);
      onMemoCreated?.();
    } catch (error) {
      console.error('Failed to create memo:', error);
    } finally {
      setLoading(false);
    }
  };

  return (
    <form onSubmit={handleSubmit} className="memo-card mb-6">
      <textarea
        value={content}
        onChange={(e) => setContent(e.target.value)}
        placeholder="ÂÜô‰∏ã‰Ω†ÁöÑÊÉ≥Ê≥ï... ‰ΩøÁî® #Ê†áÁ≠æ Êù•ÁªÑÁªáÂÜÖÂÆπ"
        className="w-full border-0 resize-none focus:ring-0 text-base"
        rows={4}
      />
      
      <div className="flex items-center justify-between mt-4 pt-3 border-t border-gray-100">
        <div className="flex items-center gap-4">
          {/* ÂèØËßÅÊÄßÈÄâÊã© */}
          <select
            value={visibility}
            onChange={(e) => setVisibility(e.target.value as any)}
            className="text-sm border-gray-300 rounded-md"
          >
            <option value="PRIVATE">üîí ÁßÅÊúâ</option>
            <option value="WORKSPACE">üë• Â∑•‰ΩúÁ©∫Èó¥</option>
            <option value="PUBLIC">üåç ÂÖ¨ÂºÄ</option>
          </select>
          
          {/* ÁΩÆÈ°∂ÈÄâÈ°π */}
          <label className="flex items-center gap-2 text-sm">
            <input
              type="checkbox"
              checked={pinned}
              onChange={(e) => setPinned(e.target.checked)}
              className="rounded"
            />
            üìå ÁΩÆÈ°∂
          </label>
        </div>
        
        <button
          type="submit"
          disabled={!content.trim() || loading}
          className="px-4 py-2 bg-primary text-white rounded-lg hover:bg-primary-hover disabled:opacity-50 disabled:cursor-not-allowed"
        >
          {loading ? 'ÂèëÂ∏É‰∏≠...' : 'ÂèëÂ∏É'}
        </button>
      </div>
    </form>
  );
};
```

## üì± ÂìçÂ∫îÂºèËÆæËÆ°‰ºòÂåñ

### ÁßªÂä®Á´ØÈÄÇÈÖç
```css
/* src/styles/responsive.css */
@media (max-width: 768px) {
  .memo-card {
    @apply mx-2 rounded-lg;
  }
  
  .memo-editor {
    @apply mx-2;
  }
  
  .memo-meta {
    @apply text-xs;
  }
}

@media (max-width: 640px) {
  .memo-content {
    @apply text-sm;
  }
  
  .memo-tag {
    @apply text-xs px-1.5 py-0.5;
  }
}
```

## üîß ÈÉ®ÁΩ≤Êõ¥Êñ∞

### 1. Êõ¥Êñ∞ÁéØÂ¢ÉÂèòÈáè
```bash
# .env
VITE_API_BASE_URL=/api/v1
VITE_APP_NAME=Memos
VITE_APP_DESCRIPTION=A privacy-first note-taking service
```

### 2. Êõ¥Êñ∞ÊûÑÂª∫ÈÖçÁΩÆ
```typescript
// vite.config.ts
export default defineConfig({
  // ... Áé∞ÊúâÈÖçÁΩÆ
  define: {
    __APP_VERSION__: JSON.stringify(process.env.npm_package_version),
    __API_BASE_URL__: JSON.stringify(process.env.VITE_API_BASE_URL || '/api/v1'),
  },
});
```

## üß™ ÂÖºÂÆπÊÄßÊµãËØïÊ∏ÖÂçï

### ÂäüËÉΩÊµãËØï
- [ ] Áî®Êà∑Ê≥®ÂÜå/ÁôªÂΩïÊµÅÁ®ã
- [ ] Memo ÂàõÂª∫„ÄÅÁºñËæë„ÄÅÂà†Èô§
- [ ] Ê†áÁ≠æËá™Âä®ËØÜÂà´ÂíåÊòæÁ§∫
- [ ] ÂèØËßÅÊÄßÊéßÂà∂
- [ ] ÁΩÆÈ°∂ÂäüËÉΩ
- [ ] ÂàÜÈ°µÂä†ËΩΩ
- [ ] ÂìçÂ∫îÂºèÂ∏ÉÂ±Ä

### ÂÖºÂÆπÊÄßÊµãËØï
- [ ] Êñ∞Êóß API Á´ØÁÇπÈÉΩËÉΩÊ≠£Â∏∏Â∑•‰Ωú
- [ ] Êï∞ÊçÆÊ†ºÂºèÊ≠£Á°ÆËΩ¨Êç¢
- [ ] Êó∂Èó¥ÊòæÁ§∫Ê†ºÂºèÁªü‰∏Ä
- [ ] ÈîôËØØÂ§ÑÁêÜÊú∫Âà∂ÂÆåÂñÑ

## üìã ÂÆûÊñΩÊ≠•È™§

1. **Êõ¥Êñ∞ API ÈÖçÁΩÆ**: ‰øÆÊîπÊâÄÊúâ API Ë∞ÉÁî®Á´ØÁÇπ
2. **Êõ¥Êñ∞Á±ªÂûãÂÆö‰πâ**: ‰ΩøÁî®Êñ∞ÁöÑ memos ÂÖºÂÆπÊï∞ÊçÆÁªìÊûÑ
3. **ÈáçÊûÑÁªÑ‰ª∂**: ÈááÁî® memos È£éÊ†ºÁöÑ UI ÁªÑ‰ª∂
4. **ÊµãËØïÈ™åËØÅ**: Á°Æ‰øùÊâÄÊúâÂäüËÉΩÊ≠£Â∏∏Â∑•‰Ωú
5. **ÈÉ®ÁΩ≤‰∏äÁ∫ø**: ÂèëÂ∏ÉÊõ¥Êñ∞ÁâàÊú¨

---

üöÄ **ÂÆåÊàêÂêéÔºåÊÇ®ÁöÑÂâçÁ´ØÂ∞ÜÂÆåÂÖ®Á¨¶Âêà memos È°πÁõÆÁöÑËÆæËÆ°ËØ≠Ë®ÄÂíåÁî®Êà∑‰ΩìÈ™åÔºÅ** 